<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jieliu</title>
</head>
<body>
<input type="text" id="search" value="12">
<img src="" alt="">
</body>
<script>
    function jieliu(fn, duration, isFirst) {
        let timer;
        return function (...args) {
            if(isFirst){
              isFirst = false;
              fn.apply(this, args);
              return;
            }
            if(!timer){
              timer = setTimeout(()=>{
                fn.apply(this, args);
                timer = null;
              }, duration)
            }
        }
    }

    document.getElementById('search').addEventListener("input", jieliu((e)=>{
      console.log(e.target.value);
    }, 1000, true))

    function test() {
        let count = 0;
        let timer;
        return function () {
          timer = setInterval(()=>{
            console.log("hello world");
            count++;
            if(count==3){
              clearInterval(timer);
            }
          }, 1000);
        }
    }
    test()();
</script>
</html>